<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>è¯‰è®¼è´¹è®¡ç®—å™¨</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="è¯‰è®¼è´¹">
    <link rel="apple-touch-icon" href="scale-icon-180.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px 16px;
            padding-top: calc(20px + env(safe-area-inset-top));
            padding-bottom: calc(20px + env(safe-area-inset-bottom));
            color: #333;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }

        .header-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 12px;
        }

        .header h1 {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .header p {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .form-label .required {
            color: #e74c3c;
            margin-left: 2px;
        }

        .select-wrapper {
            position: relative;
        }

        .select-wrapper select {
            width: 100%;
            padding: 12px 40px 12px 14px;
            font-size: 0.95rem;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #f8f9fa;
            color: #333;
            appearance: none;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .select-wrapper select:focus {
            outline: none;
            border-color: #6c5ce7;
            background: white;
        }

        .select-wrapper::after {
            content: "â–¼";
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7rem;
            color: #999;
            pointer-events: none;
        }

        .input-wrapper input {
            width: 100%;
            padding: 12px 14px;
            font-size: 0.95rem;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #f8f9fa;
            transition: border-color 0.2s;
        }

        .input-wrapper input:focus {
            outline: none;
            border-color: #6c5ce7;
            background: white;
        }

        .input-wrapper input::placeholder {
            color: #aaa;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px 14px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .checkbox-item:active {
            background: #f0ebff;
        }

        .checkbox-item input {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: #6c5ce7;
        }

        .checkbox-item span {
            font-size: 0.95rem;
            color: #333;
        }

        .hint {
            display: flex;
            align-items: center;
            margin-top: 16px;
            padding: 10px 12px;
            background: #f0ebff;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #5a4fcf;
        }

        .hint::before {
            content: "ğŸ’¡";
            margin-right: 8px;
        }

        .btn-calculate {
            width: 100%;
            padding: 16px;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #6c5ce7 0%, #a55eea 100%);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform 0.1s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.4);
        }

        .btn-calculate:active {
            transform: scale(0.98);
        }

        .result-card {
            display: none;
            background: linear-gradient(135deg, #6c5ce7 0%, #a55eea 100%);
            color: white;
        }

        .result-card.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .result-header h2 {
            font-size: 1rem;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .result-amount {
            font-size: 2.2rem;
            font-weight: 700;
        }

        .result-details {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 14px;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .result-row:not(:last-child) {
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .result-row .label {
            opacity: 0.9;
        }

        .result-row .value {
            font-weight: 600;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.75rem;
        }

        .amount-display {
            font-size: 0.8rem;
            color: #6c5ce7;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .amount-display.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-icon">
            <!-- å¤©å¹³å›¾æ ‡ - å¡«å……é£æ ¼ -->
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- åº•åº§ -->
                <rect x="22" y="52" width="20" height="4" rx="2" fill="white"/>
                <!-- ç«‹æŸ± -->
                <rect x="30" y="20" width="4" height="32" fill="white"/>
                <!-- æ¨ªæ¢ -->
                <rect x="10" y="18" width="44" height="4" rx="2" fill="white"/>
                <!-- é¡¶éƒ¨åœ†ç‚¹ -->
                <circle cx="32" cy="15" r="4" fill="white"/>
                <!-- å·¦åŠç»³ -->
                <rect x="16" y="22" width="2" height="14" fill="white"/>
                <!-- å·¦ç§¤ç›˜ -->
                <ellipse cx="17" cy="38" rx="10" cy="4" fill="white"/>
                <!-- å³åŠç»³ -->
                <rect x="46" y="22" width="2" height="14" fill="white"/>
                <!-- å³ç§¤ç›˜ -->
                <ellipse cx="47" cy="38" rx="10" ry="4" fill="white"/>
            </svg>
        </div>
        <h1>è¯‰è®¼è´¹è®¡ç®—å™¨</h1>
        <p>ä¾æ®ã€Šè¯‰è®¼è´¹ç”¨äº¤çº³åŠæ³•ã€‹</p>
    </div>

    <div class="card">
        <div class="form-group">
            <label class="form-label">æ¡ˆä»¶ç±»å‹<span class="required">*</span></label>
            <div class="select-wrapper">
                <select id="caseType" onchange="onCaseTypeChange()">
                    <option value="">è¯·é€‰æ‹©æ¡ˆä»¶ç±»å‹</option>
                    <option value="property">è´¢äº§æ¡ˆä»¶</option>
                    <option value="divorce">ç¦»å©šæ¡ˆä»¶</option>
                    <option value="personality">ä¾µå®³äººæ ¼æƒæ¡ˆä»¶</option>
                    <option value="ip">çŸ¥è¯†äº§æƒæ°‘äº‹æ¡ˆä»¶</option>
                    <option value="labor">åŠ³åŠ¨äº‰è®®æ¡ˆä»¶</option>
                    <option value="other">å…¶ä»–éè´¢äº§æ¡ˆä»¶</option>
                </select>
            </div>
        </div>

        <div class="form-group" id="amountGroup">
            <label class="form-label" id="amountLabel">è¯‰è®¼æ ‡çš„é¢ï¼ˆå…ƒï¼‰</label>
            <div class="input-wrapper">
                <input type="number" id="amount" placeholder="è¯·è¾“å…¥é‡‘é¢" inputmode="decimal" oninput="onAmountInput()">
            </div>
            <div class="amount-display" id="amountDisplay"></div>
        </div>

        <div class="form-group">
            <label class="form-label">å‡åŠæƒ…å†µï¼ˆå¯å¤šé€‰ï¼‰</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="checkbox" id="simple" onchange="calculate()">
                    <span>é€‚ç”¨ç®€æ˜“ç¨‹åº</span>
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" id="mediation" onchange="calculate()">
                    <span>è°ƒè§£ç»“æ¡ˆæˆ–æ’¤è¯‰</span>
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" id="counterclaim" onchange="calculate()">
                    <span>åè¯‰æˆ–ç¬¬ä¸‰äººè¯‰è®¼</span>
                </label>
            </div>
            <div class="hint">å¤šä¸ªå‡åŠæƒ…å†µå¯ä»¥å åŠ </div>
        </div>

        <button class="btn-calculate" onclick="calculate()">
            <span>âš–ï¸</span>
            <span>è®¡ç®—è¯‰è®¼è´¹</span>
        </button>
    </div>

    <div class="card result-card" id="resultCard">
        <div class="result-header">
            <h2>åº”ç¼´è¯‰è®¼è´¹</h2>
            <div class="result-amount" id="finalAmount">Â¥0</div>
        </div>
        <div class="result-details">
            <div class="result-row">
                <span class="label">æ¡ˆä»¶ç±»å‹</span>
                <span class="value" id="resultType">-</span>
            </div>
            <div class="result-row">
                <span class="label">åŸºç¡€å—ç†è´¹</span>
                <span class="value" id="resultBase">Â¥0</span>
            </div>
            <div class="result-row" id="discountRow" style="display: none;">
                <span class="label">å‡å…è¯´æ˜</span>
                <span class="value" id="resultDiscount">-</span>
            </div>
        </div>
    </div>

    <div class="footer">
        ä¾æ®ã€Šè¯‰è®¼è´¹ç”¨äº¤çº³åŠæ³•ã€‹ï¼ˆå›½åŠ¡é™¢ä»¤ç¬¬481å·ï¼‰
    </div>

    <script>
        const caseTypeNames = {
            'property': 'è´¢äº§æ¡ˆä»¶',
            'divorce': 'ç¦»å©šæ¡ˆä»¶',
            'personality': 'ä¾µå®³äººæ ¼æƒæ¡ˆä»¶',
            'ip': 'çŸ¥è¯†äº§æƒæ°‘äº‹æ¡ˆä»¶',
            'labor': 'åŠ³åŠ¨äº‰è®®æ¡ˆä»¶',
            'other': 'å…¶ä»–éè´¢äº§æ¡ˆä»¶'
        };

        function onCaseTypeChange() {
            const caseType = document.getElementById('caseType').value;
            const amountGroup = document.getElementById('amountGroup');
            const amountLabel = document.getElementById('amountLabel');
            const amountInput = document.getElementById('amount');
            
            // æ ¹æ®æ¡ˆä»¶ç±»å‹æ˜¾ç¤º/éšè—é‡‘é¢è¾“å…¥
            if (caseType === 'labor' || caseType === 'other') {
                amountGroup.style.display = 'none';
                amountInput.value = '';
            } else {
                amountGroup.style.display = 'block';
                
                // è®¾ç½®ä¸åŒçš„æ ‡ç­¾æ–‡å­—
                if (caseType === 'property' || caseType === 'ip') {
                    amountLabel.textContent = 'è¯‰è®¼æ ‡çš„é¢ï¼ˆå…ƒï¼‰';
                    amountInput.placeholder = 'è¯·è¾“å…¥è¯‰è®¼æ ‡çš„é‡‘é¢';
                } else if (caseType === 'divorce') {
                    amountLabel.textContent = 'æ¶‰åŠè´¢äº§æ€»é¢ï¼ˆå…ƒï¼‰';
                    amountInput.placeholder = 'æ— è´¢äº§åˆ†å‰²å¯å¡«0';
                } else if (caseType === 'personality') {
                    amountLabel.textContent = 'æŸå®³èµ”å¿é‡‘é¢ï¼ˆå…ƒï¼‰';
                    amountInput.placeholder = 'æ— èµ”å¿è¯·æ±‚å¯å¡«0';
                }
            }
            
            hideResult();
        }

        function onAmountInput() {
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const display = document.getElementById('amountDisplay');
            
            if (amount > 0) {
                display.textContent = 'é‡‘é¢ï¼š' + formatCurrency(amount);
                display.classList.add('show');
            } else {
                display.classList.remove('show');
            }
        }

        function formatCurrency(num) {
            if (num >= 100000000) {
                return (num / 100000000).toFixed(2) + 'äº¿å…ƒ';
            } else if (num >= 10000) {
                return (num / 10000).toFixed(2) + 'ä¸‡å…ƒ';
            } else {
                return num.toFixed(2) + 'å…ƒ';
            }
        }

        // è´¢äº§æ¡ˆä»¶å—ç†è´¹è®¡ç®—
        function calcPropertyFee(amount) {
            if (amount <= 10000) {
                return 50;
            } else if (amount <= 100000) {
                return amount * 0.025 - 200;
            } else if (amount <= 200000) {
                return amount * 0.02 + 300;
            } else if (amount <= 500000) {
                return amount * 0.015 + 1300;
            } else if (amount <= 1000000) {
                return amount * 0.01 + 3800;
            } else if (amount <= 2000000) {
                return amount * 0.009 + 4800;
            } else if (amount <= 5000000) {
                return amount * 0.008 + 6800;
            } else if (amount <= 10000000) {
                return amount * 0.007 + 11800;
            } else if (amount <= 20000000) {
                return amount * 0.006 + 21800;
            } else {
                return amount * 0.005 + 41800;
            }
        }

        // ç¦»å©šæ¡ˆä»¶å—ç†è´¹è®¡ç®—
        function calcDivorceFee(propertyAmount) {
            let baseFee = 200; // å–ä¸­é—´å€¼
            if (propertyAmount > 200000) {
                baseFee += (propertyAmount - 200000) * 0.005;
            }
            return baseFee;
        }

        // ä¾µå®³äººæ ¼æƒæ¡ˆä»¶å—ç†è´¹è®¡ç®—
        function calcPersonalityFee(damageAmount) {
            let baseFee = 300; // å–ä¸­é—´å€¼
            if (damageAmount > 50000 && damageAmount <= 100000) {
                baseFee += (damageAmount - 50000) * 0.01;
            } else if (damageAmount > 100000) {
                baseFee += 50000 * 0.01 + (damageAmount - 100000) * 0.005;
            }
            return baseFee;
        }

        function calculate() {
            const caseType = document.getElementById('caseType').value;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const isSimple = document.getElementById('simple').checked;
            const isMediation = document.getElementById('mediation').checked;
            const isCounterclaim = document.getElementById('counterclaim').checked;

            if (!caseType) {
                alert('è¯·é€‰æ‹©æ¡ˆä»¶ç±»å‹');
                return;
            }

            let baseFee = 0;

            // æ ¹æ®æ¡ˆä»¶ç±»å‹è®¡ç®—åŸºç¡€è´¹ç”¨
            switch (caseType) {
                case 'property':
                    if (amount <= 0) {
                        alert('è¯·è¾“å…¥è¯‰è®¼æ ‡çš„é¢');
                        return;
                    }
                    baseFee = calcPropertyFee(amount);
                    break;
                case 'divorce':
                    baseFee = calcDivorceFee(amount);
                    break;
                case 'personality':
                    baseFee = calcPersonalityFee(amount);
                    break;
                case 'ip':
                    if (amount <= 0) {
                        baseFee = 750; // æ— äº‰è®®é‡‘é¢ï¼Œå–ä¸­é—´å€¼
                    } else {
                        baseFee = calcPropertyFee(amount);
                    }
                    break;
                case 'labor':
                    baseFee = 10;
                    break;
                case 'other':
                    baseFee = 75; // å–ä¸­é—´å€¼
                    break;
            }

            // è®¡ç®—å‡å…
            let finalFee = baseFee;
            let discountText = [];

            if (isSimple) {
                finalFee = finalFee * 0.5;
                discountText.push('ç®€æ˜“ç¨‹åºå‡åŠ');
            }
            if (isMediation) {
                finalFee = finalFee * 0.5;
                discountText.push('è°ƒè§£/æ’¤è¯‰å‡åŠ');
            }
            if (isCounterclaim) {
                finalFee = finalFee * 0.5;
                discountText.push('åè¯‰å‡åŠ');
            }

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultType').textContent = caseTypeNames[caseType];
            document.getElementById('resultBase').textContent = 'Â¥' + Math.round(baseFee).toLocaleString();
            document.getElementById('finalAmount').textContent = 'Â¥' + Math.round(finalFee).toLocaleString();

            const discountRow = document.getElementById('discountRow');
            if (discountText.length > 0) {
                discountRow.style.display = 'flex';
                document.getElementById('resultDiscount').textContent = discountText.join('ã€');
            } else {
                discountRow.style.display = 'none';
            }

            const resultCard = document.getElementById('resultCard');
            resultCard.classList.add('show');
            resultCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function hideResult() {
            document.getElementById('resultCard').classList.remove('show');
        }
    </script>
</body>
</html>
